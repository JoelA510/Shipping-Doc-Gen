
> @formwaypoint/api@0.1.0 test
> jest

PASS tests/verify_mocks.test.js
  Verify Mocks
    Î“ÃªÃœ should load mocks instead of real modules (18 ms)

PASS tests/csv_unit.test.js
  CSV Import Unit Tests
    csvParser
      Î“ÃªÃœ should parse valid CSV buffer (27 ms)
      Î“ÃªÃœ should normalize headers (2 ms)
    mapper
      Î“ÃªÃœ should map rows to shipment header and lines (3 ms)

PASS tests/view_models.test.js
  Document View Model Builders
    Î“ÃªÃœ buildInvoiceViewModel creates correct metadata and lines (67 ms)
    Î“ÃªÃœ buildSliViewModel includes AES info (2 ms)
    Î“ÃªÃœ buildCooViewModel aggregates country of origin (1 ms)
    Î“ÃªÃœ buildDgDeclarationViewModel filters only DG items (1 ms)

PASS tests/validation.test.js
  Validation Engine
    Î“ÃªÃœ should pass valid shipment (20 ms)
    Î“ÃªÃœ should detect missing parties (R1) (2 ms)
    Î“ÃªÃœ should detect bad line items (R2) (1 ms)
    Î“ÃªÃœ should detect numeric mismatch (R3)
    Î“ÃªÃœ should detect invalid HTS (R4) (1 ms)

PASS tests/auth_middleware.test.js
  Auth Middleware
    requireAuth
      Î“ÃªÃœ should return 401 if no authorization header (23 ms)
      Î“ÃªÃœ should return 401 if malformed authorization header (3 ms)
      Î“ÃªÃœ should return 401 if token is invalid (2 ms)
      Î“ÃªÃœ should call next() and attach user if token is valid (2 ms)
    requireRole
      Î“ÃªÃœ should return 401 if user is not authenticated (req.user missing) (1 ms)
      Î“ÃªÃœ should return 403 if user has wrong role (1 ms)
      Î“ÃªÃœ should call next() if user has correct role (1 ms)

FAIL tests/party_service.test.js
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../src/services/parties/partyService' from 'tests/party_service.test.js'

    > 1 | const partyService = require('../src/services/parties/partyService');
        |                      ^
      2 | const { PrismaClient } = require('@prisma/client');
      3 | const prisma = new PrismaClient();
      4 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (tests/party_service.test.js:1:22)

PASS tests/ocr.test.js
  OCR Mapper
    Î“ÃªÃœ should map valid input to schema-conforming object (29 ms)
    Î“ÃªÃœ should apply defaults for missing fields (3 ms)
    Î“ÃªÃœ should generate valid IDs for new entities (1 ms)
    Î“ÃªÃœ should throw if input is fatally invalid (missing header) (30 ms)

info: [ShipmentService] createShipment completed in 3ms
error: [ShipmentService] createShipment failed in 1ms Validation failed {"stack":"Error: Validation failed\n    at Object.<anonymous> (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\tests\\services\\shipmentService.test.js:71:23)\n    at C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-mock\\build\\index.js:397:39\n    at Object.<anonymous> (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at Object.mockConstructor [as parse] (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at parse (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\src\\domains\\shipping\\services\\ShipmentService.js:11:52)\n    at ShipmentService.fn [as execute] (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\src\\shared\\core\\BaseService.js:23:32)\n    at ShipmentService.execute [as createShipment] (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\src\\domains\\shipping\\services\\ShipmentService.js:9:21)\n    at Object.createShipment (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\tests\\services\\shipmentService.test.js:74:50)\n    at Promise.then.completed (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"}
info: [ShipmentService] getShipment completed in 0ms
error: [ShipmentService] getShipment failed in 0ms Shipment not found {"stack":"Error: Shipment not found\n    at C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\src\\domains\\shipping\\services\\ShipmentService.js:39:34\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at ShipmentService.execute (C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\src\\shared\\core\\BaseService.js:23:26)"}
info: [ShipmentService] listShipments completed in 0ms
PASS tests/services/shipmentService.test.js
  ShipmentService
    createShipment
      Î“ÃªÃœ should create a shipment successfully (30 ms)
      Î“ÃªÃœ should fail if validation error occurs (28 ms)
    getShipment
      Î“ÃªÃœ should return shipment if found (2 ms)
      Î“ÃªÃœ should fail if not found (3 ms)
    listShipments
      Î“ÃªÃœ should return paginated list (2 ms)

FAIL tests/item_service.test.js
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../src/services/items/itemService' from 'tests/item_service.test.js'

    > 1 | const itemService = require('../src/services/items/itemService');
        |                     ^
      2 | const { PrismaClient } = require('@prisma/client');
      3 | const prisma = new PrismaClient();
      4 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (tests/item_service.test.js:1:21)

FAIL tests/carriers.test.js
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../src/services/carriers/carrierGateway' from 'tests/carriers.test.js'

      59 | // 4. Mock Carrier Gateway to spy on getRates
      60 | const mockGetRates = jest.fn();
    > 61 | jest.mock('../src/services/carriers/carrierGateway', () => ({
         |      ^
      62 |     getCarrierGateway: jest.fn().mockImplementation(() => ({
      63 |         getRates: mockGetRates,
      64 |         bookShipment: jest.fn()

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (tests/carriers.test.js:61:6)

PASS tests/auth.test.js
  Auth Service
    login
      Î“ÃªÃœ should return token for valid credentials (246 ms)
      Î“ÃªÃœ should throw error for invalid password (229 ms)
      Î“ÃªÃœ should throw error for non-existent user (2 ms)
    register
      Î“ÃªÃœ should throw error for short password (6 ms)
      Î“ÃªÃœ should throw error for password without letters (2 ms)
      Î“ÃªÃœ should throw error for password without numbers (2 ms)
      Î“ÃªÃœ should register user with valid strong password (98 ms)
    revocation
      Î“ÃªÃœ should revoke token by adding to redis (2 ms)
      Î“ÃªÃœ should verify token asynchronously and check blacklist (2 ms)
      Î“ÃªÃœ should throw if token is in blacklist (2 ms)

PASS tests/socket_integration.test.js
  Socket.io Integration
    Î“ÃªÃœ should reject connection without token (135 ms)
    Î“ÃªÃœ should connect with valid token (57 ms)

FAIL tests/caching.test.js
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../src/services/carriers/carrierGateway' from 'tests/caching.test.js'

      15 | }));
      16 |
    > 17 | jest.mock('../src/services/carriers/carrierGateway', () => ({
         |      ^
      18 |     getCarrierGateway: jest.fn()
      19 | }));
      20 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (tests/caching.test.js:17:6)

PASS tests/shipping.test.js
  Shipment Routes
    POST /shipments
      Î“ÃªÃœ should return 201 on success (98 ms)
      Î“ÃªÃœ should return 400 on error (13 ms)
    GET /shipments/:id
      Î“ÃªÃœ should return 200 on success (11 ms)
      Î“ÃªÃœ should return 404 on failure (9 ms)

  console.warn
    [Security] Unauthorized file access attempt by user intruder-999 for test-file.pdf

    [0m [90m 52 |[39m         [36mif[39m ([33m![39misAuthorized) {
     [90m 53 |[39m             [90m// Log attempt[39m
    [31m[1m>[22m[39m[90m 54 |[39m             console[33m.[39mwarn([32m`[Security] Unauthorized file access attempt by user ${userId} for ${filename}`[39m)[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 55 |[39m             [90m// Return 404 to prevent enumeration, or 403 if we want to be explicit. [39m
     [90m 56 |[39m             [90m// 404 is safer for static assets.[39m
     [90m 57 |[39m             [36mreturn[39m res[33m.[39mstatus([35m404[39m)[33m.[39mjson({ error[33m:[39m [32m'File not found or access denied'[39m })[33m;[39m[0m

      at warn (src/routes/files.js:54:21)

PASS tests/files_security.test.js
  GET /files/:filename Security Tests
    Î“ÃªÃœ should allow access to valid owner (ShipmentDocument) (61 ms)
    Î“ÃªÃœ should deny access to unauthorized user (IDOR) (95 ms)

PASS tests/sanity.test.js
  Sanity Check
    Î“ÃªÃœ should import app without crashing (1260 ms)

2026-01-16T21:02:45.383Z [32minfo[39m: Loading template  {"service":"shipping-doc-gen-api","templateName":"sli","templatePath":"C:\\Users\\joel.abraham\\FormWaypoint\\FormWaypoint\\apps\\api\\src\\templates\\sli.hbs"}
PASS tests/queue.test.js
  Async Job Queue
    Î“ÃªÃœ POST /upload should enqueue PROCESS_SINGLE_FILE job for normal files (281 ms)

PASS tests/integration.test.js
  API Integration
    Î“ÃªÃœ should update a document (32 ms)
    Î“ÃªÃœ should trigger an export (22 ms)
    Î“Ã¹Ã¯ skipped should upload a file, process it, and retrieve the result

FAIL tests/history_comments.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/history_comments.test.js:25:13)

FAIL tests/tenancy.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/tenancy.test.js:82:13)

FAIL tests/parties_shipments.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/parties_shipments.test.js:93:13)

FAIL tests/upload_security.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/upload_security.test.js:41:13)

FAIL tests/lifecycle.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/lifecycle.test.js:50:13)

PASS tests/generator.test.js
  PDF Generator
    Î“ÃªÃœ should generate a PDF from SLI template (2059 ms)

FAIL tests/portability.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/portability.test.js:70:13)

FAIL tests/features.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/features.test.js:75:13)

FAIL tests/csv_import.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/csv_import.test.js:49:13)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL tests/party_service.test.js
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../src/services/parties/partyService' from 'tests/party_service.test.js'

    > 1 | const partyService = require('../src/services/parties/partyService');
        |                      ^
      2 | const { PrismaClient } = require('@prisma/client');
      3 | const prisma = new PrismaClient();
      4 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (tests/party_service.test.js:1:22)

FAIL tests/item_service.test.js
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../src/services/items/itemService' from 'tests/item_service.test.js'

    > 1 | const itemService = require('../src/services/items/itemService');
        |                     ^
      2 | const { PrismaClient } = require('@prisma/client');
      3 | const prisma = new PrismaClient();
      4 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.require (tests/item_service.test.js:1:21)

FAIL tests/carriers.test.js
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../src/services/carriers/carrierGateway' from 'tests/carriers.test.js'

      59 | // 4. Mock Carrier Gateway to spy on getRates
      60 | const mockGetRates = jest.fn();
    > 61 | jest.mock('../src/services/carriers/carrierGateway', () => ({
         |      ^
      62 |     getCarrierGateway: jest.fn().mockImplementation(() => ({
      63 |         getRates: mockGetRates,
      64 |         bookShipment: jest.fn()

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (tests/carriers.test.js:61:6)

FAIL tests/caching.test.js
  Î“Ã¹Ã… Test suite failed to run

    Cannot find module '../src/services/carriers/carrierGateway' from 'tests/caching.test.js'

      15 | }));
      16 |
    > 17 | jest.mock('../src/services/carriers/carrierGateway', () => ({
         |      ^
      18 |     getCarrierGateway: jest.fn()
      19 | }));
      20 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)
      at Object.mock (tests/caching.test.js:17:6)

FAIL tests/history_comments.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/history_comments.test.js:25:13)

FAIL tests/tenancy.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/tenancy.test.js:82:13)

FAIL tests/parties_shipments.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/parties_shipments.test.js:93:13)

FAIL tests/upload_security.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/upload_security.test.js:41:13)

FAIL tests/lifecycle.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/lifecycle.test.js:50:13)

FAIL tests/portability.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/portability.test.js:70:13)

FAIL tests/features.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/features.test.js:75:13)

FAIL tests/csv_import.test.js
  Î“Ã¹Ã… Test suite failed to run

    TypeError: nodemailer.createTransport is not a function

      4 |
      5 | // Email configuration
    > 6 | const transporter = nodemailer.createTransport({
        |                                ^
      7 |     host: config.email.host,
      8 |     port: config.email.port,
      9 |     secure: config.email.port === 465, // True for 465, false for 587

      at Object.createTransport (src/services/email.js:6:32)
      at Object.require (src/routes/notifications.js:4:23)
      at Object.require (src/index.js:15:29)
      at Object.require (tests/csv_import.test.js:49:13)


Test Suites: 12 failed, 15 passed, 27 total
Tests:       1 skipped, 52 passed, 53 total
Snapshots:   0 total
Time:        6.624 s, estimated 9 s
Ran all test suites.
npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path C:\Users\joel.abraham\FormWaypoint\FormWaypoint\apps\api
npm error workspace @formwaypoint/api@0.1.0
npm error location C:\Users\joel.abraham\FormWaypoint\FormWaypoint\apps\api
npm error command failed
npm error command C:\Windows\system32\cmd.exe /d /s /c jest
